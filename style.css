:root{
  --bg-1:#0f1724;
  --bg-2:#0b1220;
  --muted:#cbd5e1;
  --accent:#f9a8d4;

  /* FIX: default cake variables */
  --cake-width: 320px;
  --layer-height: 70px;
  --frost-height:20px;
}

body,html{
  height:100%;
  margin:0;
  font-family:system-ui
}

.intro{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#000;
  transition:.8s
}

.intro.hidden{
  opacity:0;
  visibility:hidden
}

.btn{
  border:2px solid #fff;
  background:transparent;
  color:#fff;
  padding:18px 28px;
  border-radius:10px;
  font-size:18px;
  cursor:pointer
}

.stage{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  background:linear-gradient(var(--bg-1),var(--bg-2));
  color:var(--muted);
  text-align:center;
}

.stage.hidden{
  display:none
}

.name{
  color:var(--accent)
}

#personName {
  padding-bottom: 2.3cm;
}

/* cake stack */
.cake{
  width: var(--cake-width);
  display:flex;
  flex-direction:column;
  align-items:center;
  position: relative;
}

.layer{
  width: 100%;
  height: var(--layer-height);
  background: linear-gradient(180deg,#C85B4F, #A43A31);
  border-radius: 10px;
  position: relative;
  box-shadow: 0 6px 14px rgba(0,0,0,0.12) inset;
  margin-top: 6px;
  overflow: visible;
}

.frost{
  position: absolute;
  top: -1*var(--frost-height);
  left: 0;
  right: 0;
  height: var(--frost-height);
  background: linear-gradient(180deg,#fff 0%, #ffeef0 60%);
  border-top-left-radius: 12px;
  border-top-right-radius: 12px;
  clip-path: path("M0 18 C28 6, 60 30, 100 18 C140 6, 180 28, 220 18 C260 6, 300 30, 320 18 L320 0 L0 0 Z");
  box-shadow: 0 4px 8px rgba(255,255,255,0.2);
}

/* better frost ripple */
.layer .frost{
  background:
    radial-gradient(10px 6px at 22% 35%, rgba(255,255,255,0.95) 0 30%, transparent 31%),
    radial-gradient(12px 7px at 54% 30%, rgba(255,255,255,0.92) 0 30%, transparent 31%),
    linear-gradient(180deg,#fff 0%, #ffeef0 60%);
  height: calc(var(--frost-height) + 6px);
  top: -6px;
  transform: translateY(-2px);
  clip-path: polygon(0 40%, 8% 26%, 16% 38%, 24% 26%, 32% 40%, 40% 26%, 48% 38%, 56% 24%, 64% 40%, 72% 26%, 80% 38%, 88% 26%, 100% 40%, 100% 100%, 0 100%);
}

/* top decoration */
.top{
  width: calc(var(--cake-width) - 40px);
  height: calc(var(--layer-height) - 8px);
  margin-top: 6px;
  border-radius: 8px;
  background: linear-gradient(180deg,#FDEFF2, #FFDDE3);
  position: relative;
  box-shadow: 0 6px 12px rgba(0,0,0,0.08) inset;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* swirls */
.swirls{
  position: absolute;
  top: -12px;
  display:flex;
  gap:8px;
}
.swirl{
  width: 34px;
  height: 34px;
  background: radial-gradient(circle at 40% 20%, #fff 0 20%, #fff4f6 21% 40%, transparent 41%),
              linear-gradient(180deg,#ffeef4, #fff);
  border-radius: 50%;
  box-shadow: 0 3px 6px rgba(0,0,0,0.12);
  transform: rotate(-18deg);
  position:relative;
}

/* sprinkles */
.sprinkle{
  position:absolute;
  width:6px;
  height:2px;
  border-radius:2px;
  background: #e74c3c;
  transform: rotate(20deg);
  box-shadow: 0 1px 1px rgba(0,0,0,0.12);
}

.sprinkle:nth-child(1){ left:20%; top:20%; background:#FF6B6B; transform:rotate(10deg) scaleX(1.6);}
.sprinkle:nth-child(2){ left:40%; top:22%; background:#FFD93D; transform:rotate(-8deg);}
.sprinkle:nth-child(3){ left:60%; top:18%; background:#70D6FF; transform:rotate(25deg);}
.sprinkle:nth-child(4){ left:30%; top:46%; background:#C299FF; transform:rotate(-15deg);}
.sprinkle:nth-child(5){ left:52%; top:48%; background:#66CC66; transform:rotate(40deg) scaleX(1.3);}
.sprinkle:nth-child(6){ left:12%; top:50%; background:#FF7BAC; transform:rotate(-30deg) scaleX(1.2);}
.sprinkle:nth-child(7){ left:78%; top:38%; background:#FFD166; transform:rotate(5deg) scaleX(1.5);}
.sprinkle:nth-child(8){ left:70%; top:10%; background:#4D96FF; transform:rotate(55deg);}
.sprinkle:nth-child(9){ left:44%; top:8%; background:#FF9AA2; transform:rotate(-12deg) scaleX(1.4);}

/* candles */
.candles{
  display:flex;
  gap:30px;
  position: absolute;
  top: -38px;
  transform: translateY(-8px);
}
.candle{
  width:10px;
  height:40px;
  background: linear-gradient(180deg,#fff 0,#ffe6ec 40%, #ffd6e0 100%);
  border-radius:2px;
  position:relative;
  box-shadow: 0 3px 6px rgba(0,0,0,0.12);
  display:flex;
  align-items:flex-start;
  justify-content:center;
}
.candle::before{
  content:"";
  position:absolute;
  top:-8px;
  width:6px;
  height:8px;
  background: linear-gradient(180deg,#ffecb3,#ffd54a);
  border-radius:3px;
  transform: translateY(-2px);
}
.candle::after{
  content:"";
  position:absolute;
  top:-18px;
  width:8px;
  height:12px;
  background: radial-gradient(circle at 50% 30%, #fffcda 0 15%, #ffd54a 16% 35%, transparent 36%),
              linear-gradient(180deg,#ffac33, #ff6b00);
  border-radius:50% 50% 50% 50%;
  filter: drop-shadow(0 2px 2px rgba(255,120,0,0.25));
  animation: flicker 1.8s infinite;
}

@keyframes flicker{
  0%{ transform: translateY(0) scale(1); opacity:1;}
  50%{ transform: translateY(-1px) scale(0.95); opacity:0.9;}
  100%{ transform: translateY(0) scale(1); opacity:1;}
}

.candle.stripes{
  background: repeating-linear-gradient(180deg, #fff 0 8px, #ffdfe6 8px 16px);
}

/* shadow */
.cake::after{
  content:"";
  position:absolute;
  bottom: -18px;
  left: 8%;
  right: 8%;
  height: 16px;
  background: radial-gradient(closest-side, rgba(0,0,0,0.14), rgba(0,0,0,0) 60%);
  filter: blur(6px);
  z-index:-1;
}

/* label */
.label{
  margin-top: 12px;
  text-align:center;
  color:#7a4a4a;
  font-weight:600;
  letter-spacing:0.6px;
  font-size:14px;
}

/* responsive */
@media (max-width:420px){
  :root{
    --cake-width: 260px;
    --layer-height: 50px;
    --frost-height:14px;
  }
  .plate{ width: calc(var(--cake-width) + 60px);}
}

.cake-wrap{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px
}

.envelope{
  padding-top: 0.8cm;
  background:transparent;
  border:0;
  cursor:pointer;
  text-align:center
  color: rgb(134, 134, 134);
}

.envelope .icon{
  border:1px solid rgba(255,255,255,.1);
  padding:10px;
  border-radius:6px
}

.letter-modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  visibility:hidden;
  transition:.3s
}

small {
  color: rgb(134, 134, 134);
}

.letter-modal.show{
  opacity:1;
  visibility:visible
}

.letter-card{
  background:rgb(50,50,50);
  padding:20px;
  border-radius:10px;
  max-width:600px;
  color:var(--muted)
}

.close-btn{
  background:transparent;
  border:1px solid rgba(255,255,255,.2);
  color:var(--muted);
  padding:10px;
  cursor:pointer;
  border-radius:6px
}